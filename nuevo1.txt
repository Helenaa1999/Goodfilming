--- API Route (src/pages/api/movies.ts) ---
// Crea un endpoint en Astro para obtener los Ãºltimos estrenos
export async function GET() {
  const API_KEY = import.meta.env.PUBLIC_TMDB_API_KEY;
  const url = `https://api.themoviedb.org/3/movie/now_playing?api_key=${API_KEY}&language=es-ES&page=1`;

  try {
    const res = await fetch(url);
    if (!res.ok) throw new Error("Error al obtener datos de TMDb");
    const data = await res.json();
    return new Response(JSON.stringify(data.results), {
      headers: { "Content-Type": "application/json" },
    });
  } catch (error) {
    return new Response(JSON.stringify({ error: error.message }), { status: 500 });
  }
}

--- Astro Component (src/components/LatestMovies.astro) ---
---
const response = await fetch('/api/movies');
const movies = await response.json();
---

<section class="grid grid-cols-2 md:grid-cols-4 gap-4 p-4">
  {movies.map((movie) => (
    <div class="bg-gray-800 rounded-xl p-2 shadow-lg" key={movie.id}>
      <img src={`https://image.tmdb.org/t/p/w500${movie.poster_path}`} alt={movie.title} class="rounded-lg" />
      <h2 class="text-white text-lg font-semibold mt-2">{movie.title}</h2>
      <p class="text-gray-400 text-sm">{movie.release_date}</p>
    </div>
  ))}
</section>


https://dev.to/rogerdimonte/como-conectarse-a-una-api-async-await-fetch-3ekn